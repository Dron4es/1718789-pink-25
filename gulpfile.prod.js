"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.build=exports.styles=void 0;var _gulp=_interopRequireDefault(require("gulp")),_gulpPlumber=_interopRequireDefault(require("gulp-plumber")),_gulpLess=_interopRequireDefault(require("gulp-less")),_gulpPostcss=_interopRequireDefault(require("gulp-postcss")),_postcssCsso=_interopRequireDefault(require("postcss-csso")),_gulpRename=_interopRequireDefault(require("gulp-rename")),_autoprefixer=_interopRequireDefault(require("autoprefixer")),_browserSync=_interopRequireDefault(require("browser-sync")),_gulpHtmlmin=_interopRequireDefault(require("gulp-htmlmin")),_gulpTerser=_interopRequireDefault(require("gulp-terser")),_gulpLibsquoosh=_interopRequireDefault(require("gulp-libsquoosh")),_gulpSvgmin=_interopRequireDefault(require("gulp-svgmin")),_gulpSvgstore=_interopRequireDefault(require("gulp-svgstore")),_del=_interopRequireDefault(require("del"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var styles=function(){return _gulp.default.src("source/less/style.less",{sourcemaps:!0}).pipe((0,_gulpPlumber.default)()).pipe((0,_gulpLess.default)()).pipe((0,_gulpPostcss.default)([(0,_autoprefixer.default)(),(0,_postcssCsso.default)()])).pipe((0,_gulpRename.default)("style.min.css")).pipe(_gulp.default.dest("build/css",{sourcemaps:"."})).pipe(_browserSync.default.stream())};exports.styles=styles;var html=function(){return _gulp.default.src("source/*.html").pipe((0,_gulpHtmlmin.default)({collapseWhitespace:!0})).pipe(_gulp.default.dest("build"))},scripts=function(){return _gulp.default.src("source/js/*.js").pipe((0,_gulpTerser.default)()).pipe(_gulp.default.dest("build/js"))},optimizeImages=function(){return _gulp.default.src("source/img/**/*.{jpg,png}").pipe((0,_gulpLibsquoosh.default)()).pipe(_gulp.default.dest("build/img"))},copyImages=function(){return _gulp.default.src("source/img/**/*.{jpg,png}").pipe(_gulp.default.dest("build/img"))},createWebp=function(){return _gulp.default.src("source/img/**/*.{jpg,png}").pipe((0,_gulpLibsquoosh.default)({webp:{}})).pipe(_gulp.default.dest("build/img"))},svg=function(){return _gulp.default.src("source/img/**/*.svg","!source/img/logo/*.svg","!source/img/tools/*.svg").pipe((0,_gulpSvgmin.default)()).pipe(_gulp.default.dest("build/img"))},sprite=function(){return _gulp.default.src(["source/img/logo/*.svg","source/img/tools/*.svg"]).pipe((0,_gulpSvgmin.default)()).pipe((0,_gulpSvgstore.default)({inlineSvg:!0})).pipe((0,_gulpRename.default)("sprite.svg")).pipe(_gulp.default.dest("build/img"))},copy=function(e){_gulp.default.src(["source/fonts/*.{woff2,woff}","source/*.ico","source/*.webmanifest"],{base:"source"}).pipe(_gulp.default.dest("build")),e()},clean=function(){return(0,_del.default)("build")},server=function(e){_browserSync.default.init({server:{baseDir:"build"},cors:!0,notify:!1,ui:!1}),e()},reload=function(e){_browserSync.default.reload(),e()},watcher=function(){_gulp.default.watch("source/less/**/*.less",_gulp.default.series(styles)),_gulp.default.watch("source/js/script.js",_gulp.default.series(scripts)),_gulp.default.watch("source/*.html",_gulp.default.series(html,reload))},build=_gulp.default.series(clean,copy,optimizeImages,_gulp.default.parallel(styles,html,scripts,svg,sprite,createWebp));exports.build=build;var _default=_gulp.default.series(clean,copy,copyImages,_gulp.default.parallel(styles,html,scripts,svg,sprite,createWebp),_gulp.default.series(server,watcher));exports.default=_default;